# config

[click_modes/tree]
expander_left_click=command:tv_toggle_row (%o, %r, s)
expander_ctrl_left_click=command:tv_maxi_expand (%o, %r)
expander_shift_left_click=command:tv_maxi_collapse (%o, %r)
expander_middle_click=command:tv_toggle_row (%o, %r, maxi)
expander_ctrl_middle_click=command:tv_toggle_row (%o, %r, full)
expander_right_click=command:node_popup_children (%n,c,children)
expander_shift_right_click=command:node_popup_children (%n,c,children_not_hidden,not .*)
shift_middle_click=command:tv_remove_row(%o,%r)
right_click=command:void(@tv_set_focus(%o,%r),@tv_context_popup (%o, %r))
right_click_on_rls=true
blank_right_click=command:void(@tv_set_focus(%o,%r),@tv_context_popup (%o, %r))
blank_right_click_on_rls=true
blankrow_right_click=command:tv_context_popup (%o)
blankrow_right_click_on_rls=true
blankcol_right_click=command:tv_context_popup (%o)
blankcol_right_click_on_rls=true

[click_modes/tree/columns/name]
left_click=command:tv_set_cursor (%o, %r)


[click_modes/list]
colheader_left_click=command:tv_set_sort (%o, %R)
colheader_left_click_on_rls=true
colheader_ctrl_left_click=command:tv_set_second_sort (%o, %R)
colheader_middle_click=command:tv_set_second_sort (%o, %R)
colheader_right_click=command:tv_context_popup (%o,,%R,@config_get_string (defaults/lists/context_menu_colheader))
colheader_right_click_on_rls=true
blank_left_click=command:tv_selection (%o, unselect, :all)
blank_middle_click=command:tv_goto_line (%o, s, :focused,,l)
blank_middle_double_click=command:tv_goto_line (%o, s+f, :other,,l)
blank_right_click=command:tv_context_popup (%o)
blank_right_click_on_rls=true
blankrow_left_click=command:tv_selection (%o, unselect, :all)
blankrow_right_click=command:tv_context_popup (%o)
blankrow_right_click_on_rls=true
blankcol_left_click=command:tv_selection (%o, unselect, :all)
blankcol_right_click=command:tv_context_popup (%o)
blankcol_right_click_on_rls=true
right_click=command:void(@tv_set_focus(%o,%r),@tv_context_popup (%o, %r))
right_click_on_rls=true
left_click=command:tv_selection (%o, un, :all,)
ctrl_left_click=command:tv_selection (%o, inv, %r, 0)
shift_left_click=command:tv_selection (%o, i, %r, 1)
ctrl_shift_left_click=command:tv_selection (%o, sel, %r, 1)
left_double_click=command:tv_activate_row (%o, %r)
middle_click=command:tv_column_edit (%o, %r, %R)

[click_modes/list/columns/name]
left_click=command:tv_set_focus (%o, %r)

[click_modes/list/columns/name/selected]
ctrl_left_double_click=command:tv_activate_row (%o, :selected)

[click_modes/list_jjk]
fallback=list
[click_modes/list_jjk/columns/name]
ctrl_middle_click=command:tv_add_root (tree, %n)


[key_modes/donna/key_Escape]
trigger=command:void(@tv_reset_keys (%o), @tv_abort (%o))
[key_modes/donna/key_Menu]
trigger=command:tv_context_popup (%o, %r)
[key_modes/donna/key_BackSpace]
trigger=command:tv_go_up (%o, %m, f)
[key_modes/donna/key_Insert]
trigger=command:tv_go_down (%o, %m)
[key_modes/donna/key_F5]
trigger=command:tv_refresh (%o, normal)
[key_modes/donna/key_Up]
trigger=command:tv_goto_line (%o, s+f, :prev, %m, r)
is_motion=true
[key_modes/donna/key_Down]
trigger=command:tv_goto_line (%o, s + f, :next, %m, r)
is_motion=true
[key_modes/donna/key_k]
type:key=alias
key=Up
[key_modes/donna/key_j]
type:key=alias
key=Down
[key_modes/donna/key_g]
trigger=command:tv_goto_line (%o, s+f, 1, %m, l)
is_motion=true
[key_modes/donna/key_G]
trigger=command:tv_goto_line (%o, s+f, :last, %m, l)
is_motion=true
[key_modes/donna/key_braceleft]
trigger=command:tv_goto_line (%o, s+f, :top, %m, r)
is_motion=true
[key_modes/donna/key_braceright]
trigger=command:tv_goto_line (%o, s+f, :bottom, %m, r)
is_motion=true
[key_modes/donna/key_Home]
type:key=alias
key=g
[key_modes/donna/key_End]
type:key=alias
key=G
[key_modes/donna/key_Page_Up]
trigger=command:tv_goto_line (%o, s, :top, %m, r)
[key_modes/donna/key_Page_Down]
trigger=command:tv_goto_line (%o, s, :bottom, %m, r)
[key_modes/donna/key_percent]
trigger=command:tv_goto_line (%o, s+f, :focused, %m, p)
is_motion=true
[key_modes/donna/key_ugrave]
trigger=command:tv_goto_line (%o, f, :focused, %m, v)
[key_modes/donna/key_twosuperior]
is_motion=true
trigger=command:tv_goto_line (%o,s+f,:other,,l)
[key_modes/donna/key_notsign]
is_motion=true
trigger=command:tv_goto_line (%o,s,:focused,,l)
[key_modes/donna/key_Return]
trigger=command:node_trigger (%n)
[key_modes/donna/key_KP_Enter]
type:key=alias
key=Return

[key_modes/donna/key_numbersign]
type:key=combine
spec:spec=custom
custom_chars=aduADU
combine=order
[key_modes/donna/key_s]
type:key=spec
spec:spec=lower,upper,digits
combine=order
trigger=command:tv_set_sort (%o,%k,%c)
[key_modes/donna/key_S]
type:key=spec
spec:spec=lower,upper,digits
combine=order
trigger=command:tv_set_second_sort (%o,%k,%c)

[key_modes/donna/key_e]
type:key=spec
spec:spec=lower,upper,digits
trigger=command:tv_column_edit (%o,:focused,%k)

[key_modes/donna/key_v]
type:key=spec
spec:spec=motion
trigger=command:tv_selection (%o, i, %r, 1)
[key_modes/donna/key_m]
type:key=spec
spec:spec=lower,upper
trigger=command:mark_set (%k,,,%*l)
[key_modes/donna/key_M]
type:key=spec
spec:spec=lower,upper
trigger=command:mark_set (%k,,,%*n)
[key_modes/donna/key_apostrophe]
type:key=spec
spec:spec=lower,upper,extra
trigger=command:tv_set_location (%o, @mark_get_node (%k))
[key_modes/donna/key_V]
trigger=command:void(@tv_selection (%o, s, :focused), @tv_set_key_mode (%o, select))

[key_modes/donna/key_Delete]
trigger=command:nodes_remove_from (%S, @tv_get_location (%o))
[key_modes/donna/key_d]
trigger=command:nodes_remove_from (@tv_get_nodes (%o, %r), @tv_get_location (%o))
[key_modes/donna/key_D]
trigger=command:nodes_remove_from (@tv_get_nodes (%o, :selected), @tv_get_location (%o))

[key_modes/donna/key_Left]
trigger=command:tv_history_move (%o)
[key_modes/donna/key_Right]
trigger=command:tv_history_move (%o,f)
[key_modes/donna/key_h]
trigger=command:menu_popup (@tv_history_get (%o), history)

[key_modes/donna/key_quotedbl]
type:key=combine
spec:spec=lower,upper,digits,extra
combine=register
[key_modes/donna/key_y]
type:key=spec
spec:spec=motion
combine=register
trigger=command:register_set (%c, copy, @tv_get_nodes (%o, %r, 1))
[key_modes/donna/key_Y]
combine=register
trigger=command:register_set (%c, copy, @tv_get_nodes (%o, :selected))
[key_modes/donna/key_x]
type:key=spec
spec:spec=motion
combine=register
trigger=command:register_set (%c, cut, @tv_get_nodes (%o, %r, 1))
[key_modes/donna/key_X]
combine=register
trigger=command:register_set (%c, cut, @tv_get_nodes (%o, :selected))
[key_modes/donna/key_a]
type:key=spec
spec:spec=motion
combine=register
trigger=command:register_add_nodes (%c, @tv_get_nodes (%o, %r, 1))
[key_modes/donna/key_A]
combine=register
trigger=command:register_add_nodes (%c, @tv_get_nodes (%o, :selected, 1))
[key_modes/donna/key_p]
combine=register
trigger=command:register_nodes_io (%c, auto, @tv_get_location (%o))
[key_modes/donna/key_P]
combine=register
trigger=command:register_nodes_io (%c, copy, @tv_get_location (%o))
[key_modes/donna/key_O]
combine=register
trigger=command:register_nodes_io (%c, move, @tv_get_location (%o))
[key_modes/donna/key_E]
combine=register
trigger=command:register_nodes_io (%c, del)
[key_modes/donna/key_N]
combine=register
trigger=command:register_nodes_io (%c, copy, @tv_get_location (%o), 1)
[key_modes/donna/key_colon]
trigger=command:node_trigger(@ask_text(Enter FL to trigger))


[key_modes/jjk]
fallback=donna
[key_modes/jjk/key_slash]
trigger=command:tv_load_tree_file (tree, /home/jjacky/donnatella.jjk/tree)


[key_modes/select/key_Up]
trigger=command:tv_goto_line (%o, s+f, :prev, %m, r, s, 1)
is_motion=true
[key_modes/select/key_Down]
trigger=command:tv_goto_line (%o, s+f, :next, %m, r, s, 1)
is_motion=true
[key_modes/select/key_k]
type:key=alias
key=Up
[key_modes/select/key_j]
type:key=alias
key=Down
[key_modes/select/key_g]
trigger=command:tv_goto_line (%o, s+f, 1, %m, l, s, 1)
is_motion=true
[key_modes/select/key_G]
trigger=command:tv_goto_line (%o, s+f, :last, %m, l, s, 1)
is_motion=true
[key_modes/select/key_braceleft]
trigger=command:tv_goto_line (%o, s+f, :top, %m, r, s, 1)
is_motion=true
[key_modes/select/key_braceright]
trigger=command:tv_goto_line (%o, s+f, :bottom, %m, r, s, 1)
is_motion=true

[key_modes/select/key_quotedbl]
type:key=combine
spec:spec=lower,upper,digits,extra
combine=register
[key_modes/select/key_y]
combine=register
trigger=command:void(@register_set (%c, copy, @tv_get_nodes (%o, :selected)), @tv_selection (%o, uns, :all), @tv_reset_keys (%o))
[key_modes/select/key_Y]
combine=register
trigger=command:void(@register_add_nodes (%c, @tv_get_nodes (%o, :selected)), @tv_selection (%o, uns, :all), @tv_reset_keys (%o))
[key_modes/select/key_x]
combine=register
trigger=command:void(@register_set (%c, cut, @tv_get_nodes (%o, :selected)), @tv_selection (%o, uns, :all), @tv_reset_keys (%o))



[defaults/trees]
click_mode=tree
context_menu_menus=context
context_menu=add_root,:move_root:up<:move_root:first>,:move_root:down<:move_root:last>,:remove_row,-,goto<goto_fs,marks>,-,tree_visuals<@tree_visuals>,-,tv_options<!tv_options>,-,@register,-,:register:+<@register:+>,-,:refresh<@refresh>

[defaults/trees/arrangement]
columns=name
sort_column=name

[context_menus/tree_views/goto]
type:context-type=empty
name=Go to...
icon=go-jump
menu=children

[context_menus/tree_views/goto_fs]
type:context-type=trigger
trigger=fs:/

[context_menus/tree_views/add_root]
name=Add New Root...
icon=list-add
trigger=command:tv_add_root (%o, @ask_text (Enter FL))
trigger_ref_when=has_ref
trigger_ref=command:tv_add_root (%o, @ask_text (Enter FL,,%*r))

[context_menus/tree_views/tree_visuals]
type:context-type=empty
is_sensitive=has_ref
name=Tree Visuals...
submenu=1

[context_menus/tree_views/tv_options]
type:context-type=empty
name=Tree Options
icon=preferences-desktop
submenu=1

[context_menus/tree_views/columns]
type:context-type=empty
name=Columns
menu=sorted

[defaults/lists]
key_mode=donna
click_mode=list
context_menu_menus=context
context_menu=@go:tree,marks,-,add_to_tree<add_as_root>,-,!new_nodes,new_items,-,@register,-,:register:+<@register:+>,-,@selection,-,column_edit<!column_edit,-,@touch>,-,:refresh<@refresh>
context_menu_task=@go:tree,marks,-,@selection,-,:refresh<@refresh>,-,@tasks
context_menu_colheader=columns<!columns>,-,:sort_order<!sort_order>,:second_sort_order<!second_sort_order>,-,options<column_options<!column_options>,list_options<!tv_options>>

[defaults/lists/arrangement/color_filters/]
filter=*.tar.*|*.tgz|*.zip|*.rar
column=name
foreground=green

[defaults/lists/arrangement/color_filters/]
filter=size:0
column=size
bold=true

[defaults/lists/arrangement/color_filters/]
filter=size:>1G
column=size
foreground-rgba=rgb(255,0,0)

[defaults/lists/arrangement/color_filters/]
filter=size:700M-1G
column=size
foreground-rgba=rgb(190,0,0)

[defaults/lists/arrangement/color_filters/]
filter=size:>=350M
column=size
foreground-rgba=rgb(108,0,0)

[defaults/lists/arrangement/color_filters/]
filter=time:A<=1H
column=time
foreground-rgba=rgb(0,80,210)

[defaults/lists/arrangement/color_filters/]
filter=time:A0d
column=time
foreground-rgba=rgb(0,150,200)

[defaults/lists/arrangement/color_filters/]
filter=time:A1d
column=time
foreground-rgba=rgb(0,200,160)

[defaults/lists/arrangement/color_filters/]
filter=time:A0V
column=time
foreground-rgba=rgb(0,180,0)

[defaults/lists/arrangement/color_filters/]
filter=perms:/o=wx
column=perms
background=yellow

[defaults/lists/arrangement/color_filters/]
filter=perms:sx
column=own
background-rgba=rgb(0,255,0)



[menus/context]
sort=false
submenus=3
use_default_icons=false
left_click=command:node_trigger (%n, t, t+p)

[context_menus/tree_views/aliases]
go=:go.up:f<:go.tree_root:%C,-,:go.up:f+s,:go.back,:go.forward,:go.down>
selection=selection_select,selection_invert,selection_unselect,selection_filter
register=:register.cut:%C,:register.copy:%C,:register.append:%C,:register.paste:%C<:register.paste:%C,:register.paste_copy:%C,:register.paste_move:%C,:register.paste_new_folder:%C>
refresh=:refresh.visible,:refresh.simple,:refresh,:refresh.reload
touch=touch_now
tasks=:domain.task.toggle,:domain.task.cancel,:domain.task.show_ui
tree_visuals=:tree_visuals.name,:tree_visuals.icon,:tree_visuals.box,:tree_visuals.highlight,:tree_visuals.click_mode

[context_menus/tree_views/add_to_tree]
name=Add Current Location To Tree
trigger=command:tv_set_location (tree, @tv_get_location (%o))

[context_menus/tree_views/add_as_root]
name=...As New Root
trigger=command:tv_add_root (tree, @tv_get_location (%o))

[context_menus/tree_views/column_edit]
name=Edit...
icon=gtk-edit
is_sensitive=has_ref or selection
type=3

[context_menus/tree_views/selection_select]
name=Select All
icon=edit-select-all
trigger=command:tv_selection (%o, s, :all)
[context_menus/tree_views/selection_unselect]
name=Unselect All
trigger=command:tv_selection (%o, u, :all)
[context_menus/tree_views/selection_invert]
name=Invert Selection
trigger=command:tv_selection (%o, i, :all)
[context_menus/tree_views/selection_filter]
name=Selection Filter...
trigger=command:tv_selection_nodes (%o, d, @nodes_filter (@tv_get_nodes (%o, :all), @ask_text (Enter your selection filter), %o))

[context_menus/tree_views/marks]
type:context-type=container
name=Go to mark...
icon=go-jump
trigger=mark:/
submenus=1
menu=foo

[menus/foo]
sort=true
use_default_icons=false
children=1

[context_menus/tree_views/touch_now]
is_visible=ref_not_selected or (ref_selected or (not has_ref and selection))
name_ref=Set time to now
trigger_ref_when=ref_not_selected
trigger_ref=command:tv_column_set_value (%o, %r,, time, n)
name_sel=Set time to now (selection)
trigger_sel_when=ref_selected or (not has_ref and selection)
trigger_sel=command:tv_column_set_value (%o, :selected,, time, n)

[context_menus/tree_views/new_items]
type:context-type=container
name=New Items
icon=folder-new
trigger=fs:/home/jjacky/donnatella/new-items
submenus=1
menu=new_items

[context_menus/tree_views/options]
type:context-type=empty
name=Options
icon=preferences-desktop
submenus=1

[context_menus/tree_views/column_options]
type:context-type=empty
name=Column Options
submenus=1

[context_menus/tree_views/list_options]
type:context-type=empty
name=List Options
submenus=1

[menus/new_items]
sort=true
left_click=command:tv_goto_line (:active, s+f, @nodes_io (%n, c, @tv_get_location (:active), @ask_text (new name,,@node_get_property(%n,name))))

[events/pre-exit]
confirm=command:tasks_pre_exit()

[task_manager/events/task_done]
remove=command:nodes_io (%n, d)
[task_manager/events/task_failed]
notify=exec:&notify-send "Donnatella: A task just failed" %N

[layouts]
std=paneH(!treeview:tree@230,treeview:list)
dp=paneH(!treeview:tree@230,paneV(treeview:foo,treeview:list))
test=paneV(paneH(!treeview:tree@230,paneV(treeview:list,treeview:list3)),paneH(!treeview:tree2,treeview:list2))

[donna]
layout=test
width=1080
height=420
active_list=list
domain_exec:title-domain=custom
custom_exec=Search Results
domain_task:title-domain=custom
domain_register:title-domain=custom

[tree_views/tree2]
is_tree=true
sync_with=list2

[tree_views/list2]
not_active_list=true

[events/start]
marks=command:mark_load (,1)
registers=command:register_load_all (,1)
tmp=command:tv_set_location (:active, fs:/tmp)

[events/exit]
marks=command:mark_save ()
registers=command:register_save_all ()

[statusbar]
areas=tasks,active,keys,focus
[statusbar/tasks]
source=:task
format=%A %F
expand=false
[statusbar/active]
source=:active
format=%v/%a files (%V) %N
[statusbar/focus]
source=:focused
format=%o %K
width=100
expand=false
key_modes_colors=true
key_mode_select_background-rgba=rgba(0,42,200,0.8)
key_mode_select_foreground=white
[statusbar/keys]
source=:focused
format=%k
width=150
expand=false

[providers/exec]
terminal=urxvt -hold -e
[providers/fs]
#exec_copy=>cp -a -i -v -t %d %s
exec_copy=!echo cp -t %d %s
exec_move=!echo mv -t %d %s
exec_delete=!echo rm %s

[defaults/sort]
locale_based=false
natural_order=true
dot_first=true
dot_mixed=false
case_sensitive=false
ignore_spunct=false

[defaults/size]
digits=+2
format=%b

[defaults/column_types/time]
desc_first=true

[defaults/column_types/size]
desc_first=true

[defaults/lists/columns/name]
type:ct=name
width=420

[defaults/lists/columns/size]
type:ct=size
desc_first=true
format_tooltip=%R
width=80

[defaults/lists/columns/time]
type:ct=time
title=Modified
format_tooltip=%A %e %B %Y, %T (%o)
format=%F %T
width=108

[defaults/lists/columns/perms]
format_tooltip=%p (%o)
width=30

[defaults/lists/columns/own]
type:ct=perms
format=%V:%H
format_tooltip=
sort=+3
width=70

[menus/children_not_hidden]
sort=true
submenus=3
children=2
children_show_hidden=false
[menus/children]
sort=true
submenus=3
children=2

[menus/history]
sort=false

[tree_views/tree]
is_tree=true
auto_focus_sync=true
is_minitree=true
sync_with=:active
sync_mode:sync=full
sync_scroll=false
#node_types=3
show_hidden=false
#node_visuals=14
node_visuals:visuals=box,highlight,icon

[tree_views/list]
#is_tree=false
#focusing_click=false
location=fs:/tmp
key_mode=jjk
click_mode=list_jjk

[defaults/lists/columns/desc]
type=text
property=desc

[visuals/]
node=fs:/home/jjacky
box=box-yellow
highlight=hl-blue

[visuals/]
node=fs:/home/jjacky/.config
box=box-green

[visuals/]
node=fs:/home/jjacky/.config/kalu
icon=kalu

[visuals/]
node=fs:/archives/INCOMING
icon=screensaver


# ARRANGEMENTS

[tree_views/list/arrangements]
type=4
[tree_views/list/arrangements/]
mask=fs:/tmp/*
[tree_views/list/arrangements//columns_options/time]
format=%O

[arrangements]
type=1
[arrangements/]
mask=fs:/archives/INCOMING/
sort_column=time
[arrangements//color_filters]
type=3
[arrangements//color_filters/]
filter=*.foo.*|*.bar.*
column=name
foreground-rgba=rgb(223,15,0)
[arrangements//color_filters/]
filter=*.avi
column=name
foreground=blue

[arrangements/]
mask=fs:/tmp/foobar/*
sort_column=time
sort_order:order=desc
[arrangements/]
#mask=fs:/tmp/?*
mask=fs:/tmp/*
sort_column=size
[arrangements//columns_options/perms]
format=%o
[arrangements/]
mask=fs:/*
columns=ln,name,size,time,perms,own
sort_column=name
sort_order:order=asc
second_sort_column=name
second_sort_order:order=asc
second_sort_sticky=true
second_sort_always=true

[arrangements/]
mask=exec:*
columns=path,name,size,time,perms,own
sort_column=path
sort_order:order=asc
second_sort_column=name
second_sort_order:order=asc
second_sort_sticky=true
second_sort_always=true
[arrangements//columns_options/name]
width=300

[defaults/lists/columns/path]
type=text
property=path

[arrangements/]
mask=task:/*
columns=name,progress,text,label
[arrangements//columns_options/name]
title=Task
width=230
[arrangements//columns_options/progress]
title=Progress
width=80
[arrangements//columns_options/text]
title=Status
property=status
width=230
[arrangements//columns_options/label]
title=State
property=state
labels=0=Stopped,1=Waiting,2=Running,3=On Hold,4=Paused,5=Cancelled,6=Failed,7=Done
width=80

[arrangements/]
mask=config:/*
columns=name,opt-type,value
[arrangements//columns_options/name]
width=230
[arrangements//columns_options/value]
width=420

[arrangements/]
mask=mark:/*
columns=name,mark-type,mark-value
[arrangements//columns_options/name]
width=230

[defaults/lists/columns/mark-type]
type=value
width=80
property_value=mark-type
property_extra=mark-type-extra

[defaults/lists/columns/mark-value]
type=text
property=value
width=420

[defaults/lists/columns/opt-type]
type=value
show_type=true
width=108

[defaults/lists/columns/ln]
type=line-number
title=#
relative=true
width=30

[tree_views/list2/arrangements]
type=3
[tree_views/list2/arrangements/]
mask=fs:/*
columns=ln,name,size,time,perms,own


#eof
